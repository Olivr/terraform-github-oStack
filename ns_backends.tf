# ---------------------------------------------------------------------------------------------------------------------
# Multi-providers
# ---------------------------------------------------------------------------------------------------------------------
locals {
  ns_backends = lookup({
    tfe = module.ns_backends_tfe
  }, var.backend_provider)
}

# ---------------------------------------------------------------------------------------------------------------------
# Computations
# ---------------------------------------------------------------------------------------------------------------------
locals {
  ns_backends_to_create = merge(flatten([for ns_id, ns_config in local.namespaces : [
    ns_config.infra.enabled == false ? null : { "${ns_id}_infra" = ns_config.infra },
  ]])...)
}
